<!DOCTYPE HTML>
<html lang="en" class="sidebar-visible no-js light">
    <head>
        <!-- Book generated using mdBook -->
        <meta charset="UTF-8">
        <title>Détection de l&#x27;adversaire : LIDAR - Documentation Club Robot Insa Toulouse</title>
        
        


        <!-- Custom HTML head -->
        


        <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="theme-color" content="#ffffff" />

        
        <link rel="icon" href="../../favicon.svg">
        
        
        <link rel="shortcut icon" href="../../favicon.png">
        
        <link rel="stylesheet" href="../../css/variables.css">
        <link rel="stylesheet" href="../../css/general.css">
        <link rel="stylesheet" href="../../css/chrome.css">
        
        <link rel="stylesheet" href="../../css/print.css" media="print">
        

        <!-- Fonts -->
        <link rel="stylesheet" href="../../FontAwesome/css/font-awesome.css">
        
        <link rel="stylesheet" href="../../fonts/fonts.css">
        

        <!-- Highlight.js Stylesheets -->
        <link rel="stylesheet" href="../../highlight.css">
        <link rel="stylesheet" href="../../tomorrow-night.css">
        <link rel="stylesheet" href="../../ayu-highlight.css">

        <!-- Custom theme stylesheets -->
        

        
    </head>
    <body>
        <!-- Provide site root to javascript -->
        <script type="text/javascript">
            var path_to_root = "../../";
            var default_theme = window.matchMedia("(prefers-color-scheme: dark)").matches ? "navy" : "light";
        </script>

        <!-- Work around some values being stored in localStorage wrapped in quotes -->
        <script type="text/javascript">
            try {
                var theme = localStorage.getItem('mdbook-theme');
                var sidebar = localStorage.getItem('mdbook-sidebar');

                if (theme.startsWith('"') && theme.endsWith('"')) {
                    localStorage.setItem('mdbook-theme', theme.slice(1, theme.length - 1));
                }

                if (sidebar.startsWith('"') && sidebar.endsWith('"')) {
                    localStorage.setItem('mdbook-sidebar', sidebar.slice(1, sidebar.length - 1));
                }
            } catch (e) { }
        </script>

        <!-- Set the theme before any content is loaded, prevents flash -->
        <script type="text/javascript">
            var theme;
            try { theme = localStorage.getItem('mdbook-theme'); } catch(e) { }
            if (theme === null || theme === undefined) { theme = default_theme; }
            var html = document.querySelector('html');
            html.classList.remove('no-js')
            html.classList.remove('light')
            html.classList.add(theme);
            html.classList.add('js');
        </script>

        <!-- Hide / unhide sidebar before it is displayed -->
        <script type="text/javascript">
            var html = document.querySelector('html');
            var sidebar = 'hidden';
            if (document.body.clientWidth >= 1080) {
                try { sidebar = localStorage.getItem('mdbook-sidebar'); } catch(e) { }
                sidebar = sidebar || 'visible';
            }
            html.classList.remove('sidebar-visible');
            html.classList.add("sidebar-" + sidebar);
        </script>

        <nav id="sidebar" class="sidebar" aria-label="Table of contents">
            <div class="sidebar-scrollbox">
                <ol class="chapter"><li class="chapter-item expanded "><a href="../../intro.html"><strong aria-hidden="true">1.</strong> Introduction</a></li><li class="chapter-item expanded "><a href="../../outils_communs/index.html"><strong aria-hidden="true">2.</strong> Outils Communs</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../../outils_communs/dual_boot.html"><strong aria-hidden="true">2.1.</strong> Dual Boot</a></li><li class="chapter-item expanded "><a href="../../outils_communs/git.html"><strong aria-hidden="true">2.2.</strong> Git</a></li><li class="chapter-item expanded "><a href="../../outils_communs/ide.html"><strong aria-hidden="true">2.3.</strong> CLion</a></li></ol></li><li class="chapter-item expanded "><a href="../../info/index.html"><strong aria-hidden="true">3.</strong> Informatique</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../../info/mise_en_place/index.html"><strong aria-hidden="true">3.1.</strong> Mise en place</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../../info/mise_en_place/ide.html"><strong aria-hidden="true">3.1.1.</strong> IDE</a></li><li class="chapter-item expanded "><a href="../../info/mise_en_place/repertoire_de_travail.html"><strong aria-hidden="true">3.1.2.</strong> Répertoire de travail</a></li><li class="chapter-item expanded "><a href="../../info/mise_en_place/compilation.html"><strong aria-hidden="true">3.1.3.</strong> Compilation</a></li></ol></li><li class="chapter-item expanded "><a href="../../info/outils/index.html"><strong aria-hidden="true">3.2.</strong> Prise en main des outils</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../../info/outils/cmake.html"><strong aria-hidden="true">3.2.1.</strong> CMake</a></li><li class="chapter-item expanded "><a href="../../info/outils/petrilab.html"><strong aria-hidden="true">3.2.2.</strong> PetriLab</a></li></ol></li><li class="chapter-item expanded "><a href="../../info/explications/index.html"><strong aria-hidden="true">3.3.</strong> Explications du code</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../../info/explications/racine.html"><strong aria-hidden="true">3.3.1.</strong> Architecture de la racine</a></li><li class="chapter-item expanded "><a href="../../info/explications/architecture.html"><strong aria-hidden="true">3.3.2.</strong> Vue globale du projet</a></li><li class="chapter-item expanded "><a href="../../info/explications/communication.html"><strong aria-hidden="true">3.3.3.</strong> Communication avec le hardware</a></li><li class="chapter-item expanded "><a href="../../info/explications/lidar.html" class="active"><strong aria-hidden="true">3.3.4.</strong> Détection de l'adversaire : LIDAR</a></li><li class="chapter-item expanded "><a href="../../info/explications/robot.html"><strong aria-hidden="true">3.3.5.</strong> Création d'un robot</a></li><li class="chapter-item expanded "><a href="../../info/explications/simu.html"><strong aria-hidden="true">3.3.6.</strong> Architecture du simulateur</a></li></ol></li></ol></li><li class="chapter-item expanded "><a href="../../elec_soft/index.html"><strong aria-hidden="true">4.</strong> Electronique Logicielle</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../../elec_soft/organisation/index.html"><strong aria-hidden="true">4.1.</strong> Organisation du code</a></li><li class="chapter-item expanded "><a href="../../elec_soft/mise_en_place/index.html"><strong aria-hidden="true">4.2.</strong> Mise en place</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../../elec_soft/mise_en_place/compile.html"><strong aria-hidden="true">4.2.1.</strong> Compilation</a></li><li class="chapter-item expanded "><a href="../../elec_soft/mise_en_place/repo.html"><strong aria-hidden="true">4.2.2.</strong> Répertoire de travail</a></li><li class="chapter-item expanded "><a href="../../elec_soft/mise_en_place/ide.html"><strong aria-hidden="true">4.2.3.</strong> IDE</a></li><li class="chapter-item expanded "><a href="../../elec_soft/mise_en_place/flash.html"><strong aria-hidden="true">4.2.4.</strong> Flashage</a></li></ol></li><li class="chapter-item expanded "><a href="../../elec_soft/apprendre_rust.html"><strong aria-hidden="true">4.3.</strong> Apprendre Rust</a></li><li class="chapter-item expanded "><a href="../../elec_soft/modules/index.html"><strong aria-hidden="true">4.4.</strong> Communication des modules avec l'info</a></li></ol></li><li class="chapter-item expanded "><a href="../../elec_mat/index.html"><strong aria-hidden="true">5.</strong> Electronique matérielle</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../../elec_mat/mise_en_place/tools.html"><strong aria-hidden="true">5.1.</strong> Mise en place</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../../elec_mat/mise_en_place/folders.html"><strong aria-hidden="true">5.1.1.</strong> Organisation</a></li><li class="chapter-item expanded "><a href="../../elec_mat/mise_en_place/install_git.html"><strong aria-hidden="true">5.1.2.</strong> Installation</a></li></ol></li><li class="chapter-item expanded "><a href="../../elec_mat/kicad.html"><strong aria-hidden="true">5.2.</strong> Préparer ta carte</a></li><li class="chapter-item expanded "><a href="../../elec_mat/tips&tricks.html"><strong aria-hidden="true">5.3.</strong> Conseils et outils usuels</a></li><li class="chapter-item expanded "><a href="../../elec_mat/production.html"><strong aria-hidden="true">5.4.</strong> Tirer une carte</a></li><li class="chapter-item expanded "><a href="../../elec_mat/references/index.html"><strong aria-hidden="true">5.5.</strong> Références</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../../elec_mat/references/ethernet.html"><strong aria-hidden="true">5.5.1.</strong> Utilisation du module ethernet</a></li><li class="chapter-item expanded "><a href="../../elec_mat/references/ref_cartes.html"><strong aria-hidden="true">5.5.2.</strong> Annexe : liste des cartes du Club</a></li><li class="chapter-item expanded "><a href="../../elec_mat/references/ref_composants.html"><strong aria-hidden="true">5.5.3.</strong> Annexe : liste des composants usuels</a></li></ol></li><li class="chapter-item expanded "><a href="../../elec_mat/cablage.html"><strong aria-hidden="true">5.6.</strong> Cablage Robot</a></li></ol></li><li class="chapter-item expanded "><a href="../../reference/index.html"><strong aria-hidden="true">6.</strong> Documents de référence</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../../reference/commun.html"><strong aria-hidden="true">6.1.</strong> Communs</a></li><li class="chapter-item expanded "><a href="../../reference/deplacement.html"><strong aria-hidden="true">6.2.</strong> Carte déplacement</a></li><li class="chapter-item expanded "><a href="../../reference/servomoteur.html"><strong aria-hidden="true">6.3.</strong> Carte servomoteur</a></li><li class="chapter-item expanded "><a href="../../reference/evitement.html"><strong aria-hidden="true">6.4.</strong> Carte évitement</a></li><li class="chapter-item expanded "><a href="../../reference/couleur.html"><strong aria-hidden="true">6.5.</strong> Carte capteur couleur</a></li><li class="chapter-item expanded "><a href="../../reference/pompe.html"><strong aria-hidden="true">6.6.</strong> Carte pompe à vide</a></li></ol></li><li class="chapter-item expanded "><a href="../../com/index.html"><strong aria-hidden="true">7.</strong> Communication (test)</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../../com/int/index.html"><strong aria-hidden="true">7.1.</strong> Interne (entre nous)</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../../com/int/gitter.html"><strong aria-hidden="true">7.1.1.</strong> Gitter</a></li><li class="chapter-item expanded "><a href="../../com/int/fb.html"><strong aria-hidden="true">7.1.2.</strong> Messenger/Facebook</a></li></ol></li><li class="chapter-item expanded "><a href="../../com/ext/index.html"><strong aria-hidden="true">7.2.</strong> Externe</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../../com/ext/site.html"><strong aria-hidden="true">7.2.1.</strong> Site</a></li><li class="chapter-item expanded "><a href="../../com/ext/fb.html"><strong aria-hidden="true">7.2.2.</strong> Page Facebook</a></li></ol></li><li class="chapter-item expanded "><a href="../../com/res/md.html"><strong aria-hidden="true">7.3.</strong> Ressources &amp; images</a></li></ol></li></ol>
            </div>
            <div id="sidebar-resize-handle" class="sidebar-resize-handle"></div>
        </nav>

        <div id="page-wrapper" class="page-wrapper">

            <div class="page">
                
                <div id="menu-bar-hover-placeholder"></div>
                <div id="menu-bar" class="menu-bar sticky bordered">
                    <div class="left-buttons">
                        <button id="sidebar-toggle" class="icon-button" type="button" title="Toggle Table of Contents" aria-label="Toggle Table of Contents" aria-controls="sidebar">
                            <i class="fa fa-bars"></i>
                        </button>
                        <button id="theme-toggle" class="icon-button" type="button" title="Change theme" aria-label="Change theme" aria-haspopup="true" aria-expanded="false" aria-controls="theme-list">
                            <i class="fa fa-paint-brush"></i>
                        </button>
                        <ul id="theme-list" class="theme-popup" aria-label="Themes" role="menu">
                            <li role="none"><button role="menuitem" class="theme" id="light">Light (default)</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="rust">Rust</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="coal">Coal</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="navy">Navy</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="ayu">Ayu</button></li>
                        </ul>
                        
                        <button id="search-toggle" class="icon-button" type="button" title="Search. (Shortkey: s)" aria-label="Toggle Searchbar" aria-expanded="false" aria-keyshortcuts="S" aria-controls="searchbar">
                            <i class="fa fa-search"></i>
                        </button>
                        
                    </div>

                    <h1 class="menu-title">Documentation Club Robot Insa Toulouse</h1>

                    <div class="right-buttons">
                        
                        <a href="../../print.html" title="Print this book" aria-label="Print this book">
                            <i id="print-button" class="fa fa-print"></i>
                        </a>
                        
                        
                    </div>
                </div>

                
                <div id="search-wrapper" class="hidden">
                    <form id="searchbar-outer" class="searchbar-outer">
                        <input type="search" name="search" id="searchbar" name="searchbar" placeholder="Search this book ..." aria-controls="searchresults-outer" aria-describedby="searchresults-header">
                    </form>
                    <div id="searchresults-outer" class="searchresults-outer hidden">
                        <div id="searchresults-header" class="searchresults-header"></div>
                        <ul id="searchresults">
                        </ul>
                    </div>
                </div>
                

                <!-- Apply ARIA attributes after the sidebar and the sidebar toggle button are added to the DOM -->
                <script type="text/javascript">
                    document.getElementById('sidebar-toggle').setAttribute('aria-expanded', sidebar === 'visible');
                    document.getElementById('sidebar').setAttribute('aria-hidden', sidebar !== 'visible');
                    Array.from(document.querySelectorAll('#sidebar a')).forEach(function(link) {
                        link.setAttribute('tabIndex', sidebar === 'visible' ? 0 : -1);
                    });
                </script>

                <div id="content" class="content">
                    <main>
                        <h1><a class="header" href="#détection-de-ladversaire--lidar" id="détection-de-ladversaire--lidar">Détection de l'adversaire : LIDAR</a></h1>
<p>Jusqu'à présent, la détection de l'adversaire venait d'un projet <em>home-made</em> du club : un laser monté sur tourelle envoyait un rayon laser autour de la base. Une pièce réfléchissante était posée sur les robots adverses et le système était capable de connaître une valeur booléenne sur la présence d'un adversaire. Mécaniquement, le rayon passait soit au-dessus soit en-dessous de l'adversaire s'il n'était pas dans un rayon de 30 à 50 centimètres de notre robot. Les électroniques étaient enfin capables de nous donner l'angle auquel le robot a été détecté.</p>
<h2><a class="header" href="#explications" id="explications">Explications</a></h2>
<p>Cette solution s'est inclinée face à l'utilisation de <a href="">LIDAR</a>s depuis 2019. Il s'agit d'un capteur beaucoup plus précis que notre ancienne tourelle, qui map en 2D son environnement avec des lasers. En sortie, on a une liste de distances qui représentent N points détectés à une certaine distance de notre robot.</p>
<p>Le code développé en interne au club permets d'utiliser deux LIDARs différents : <strong>[Hokuyo](https://github.com/ClubRobotInsat/info/blob/develop/src/Lidar/Doc/Doc\ Hokuyo.pdf)</strong> et <strong><a href="https://github.com/ClubRobotInsat/info/blob/develop/src/Lidar/Doc/doc_SICK.pdf">SICK TiM55x</a></strong>, le plus précis.</p>
<p>Dans un premier temps, un <a href="https://github.com/ClubRobotInsat/info/blob/develop/src/Lidar/Driver">code driver</a> est capable de communiquer avec chacun de ces LIDARs. Pour avoir une interface d'acquisition, il suffit d'utiliser ce code :</p>
<pre><code class="language-cpp">#include &quot;Lidar/Driver/lidar.h&quot;
std::unique_ptr&lt;Lidar&gt; my_lidar = Lidar::open_lidar(Lidar::Any);
</code></pre>
<h3><a class="header" href="#sick-tim55x" id="sick-tim55x">SICK TiM55x</a></h3>
<p>Pour utiliser ce capteur, il faut exécuter le code en tant que <code>root</code>. De plus, il faut actuellement brancher l'électronique sur une alimentation à <code>16V / 0.2 A</code> pour brancher le câble circulaire à 5 broches sur le LIDAR. Il faut utiliser un autre câble USB que celui soudé entre le LIDAR et l'ordinateur.</p>
<h2><a class="header" href="#capacités-actuelles" id="capacités-actuelles">Capacités actuelles</a></h2>
<p>Le code est capable de <a href="https://github.com/ClubRobotInsat/info/blob/develop/src/Lidar/filtre.h">filtrer</a> les trames d'acquisition. Ces points sont <a href="https://github.com/ClubRobotInsat/info/blob/develop/src/Lidar/lidarsToGrid.h">entreposés dans un plan 2D</a> en fonction des <a href="https://github.com/ClubRobotInsat/info/blob/develop/src/commun/MathToolbox/Repere.h">coordonnées</a> du lidar ce qui permets de connaître la position absolue de chaque point dans un repère quelconque, quelque soit la position initiale du robot.</p>
<p>Grâce à la grande précision des LIDARs, la cartographie de toute la table est possible. Vu que le LIDAR est placé tout en haut de notre robot, les seuls points observés par le LIDAR représentent des points sur la table <em>(les arbitres n'influent pas sur les acquisitions)</em> en-dehors des objets à manipuler. Ainsi, seuls les robots adverses sont vus par le LIDAR, et donc les objets détectés par le LIDAR <a href="https://github.com/ClubRobotInsat/info/blob/develop/src/Lidar/FindRobots.h">sont considérés comme des robots adverses</a>.</p>
<h2><a class="header" href="#intégration-dans-le-code" id="intégration-dans-le-code">Intégration dans le code</a></h2>
<p>Ce capteur est externe au travail dans électroniciens donc la classe <a href="https://github.com/ClubRobotInsat/info/blob/develop/src/robot/Robot.h">Robot</a> contient directement une instance d'un <a href="https://github.com/ClubRobotInsat/info/blob/develop/src/Lidar/lidar.h">LIDAR</a> en plus du <a href="https://github.com/ClubRobotInsat/info/blob/develop/src/robot/Modules/ModuleManager.h">ModuleManager</a>. Il donne à disposition l'accès à <code>optional&lt;FrameLidar&gt; get_lidar_frame() const</code>, qui est ensuite utilisée <a href="https://github.com/ClubRobotInsat/info/blob/develop/src/robot/Strategy/AbstractStrategy.h">dans la stratégie</a> pour détecter les adversaires en fonction de la position du robot.</p>

                    </main>

                    <nav class="nav-wrapper" aria-label="Page navigation">
                        <!-- Mobile navigation buttons -->
                        
                            <a rel="prev" href="../../info/explications/communication.html" class="mobile-nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                                <i class="fa fa-angle-left"></i>
                            </a>
                        

                        
                            <a rel="next" href="../../info/explications/robot.html" class="mobile-nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                                <i class="fa fa-angle-right"></i>
                            </a>
                        

                        <div style="clear: both"></div>
                    </nav>
                </div>
            </div>

            <nav class="nav-wide-wrapper" aria-label="Page navigation">
                
                    <a rel="prev" href="../../info/explications/communication.html" class="nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                        <i class="fa fa-angle-left"></i>
                    </a>
                

                
                    <a rel="next" href="../../info/explications/robot.html" class="nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                        <i class="fa fa-angle-right"></i>
                    </a>
                
            </nav>

        </div>

        

        

        

        
        <script type="text/javascript">
            window.playground_copyable = true;
        </script>
        

        

        
        <script src="../../elasticlunr.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="../../mark.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="../../searcher.js" type="text/javascript" charset="utf-8"></script>
        

        <script src="../../clipboard.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="../../highlight.js" type="text/javascript" charset="utf-8"></script>
        <script src="../../book.js" type="text/javascript" charset="utf-8"></script>

        <!-- Custom JS scripts -->
        

        

    </body>
</html>
